<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work 1 - JQuery And Bootstrap</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="jquery-3.7.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        .col{
            display: flex;
            justify-content: center;
            width: 600px;
            height: 150px;
            object-fit: cover;
            margin-bottom: 10px;
        }

        img{
            box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
            padding: 10px;
        }
    </style>  
</head>
<body>
    <div class="container my-4" id="menu">
        <div class="card">
            <div class="card-header">
                <span>Work 1 : JQuery and Bootstrap</span>
            </div>
            <div class="card-body">
                <h5 class="card-title">นายพีรพล เล่าสุอังกูร</h5>
                <p class="card-text">Mobile and Web Development <br>Department of Computer Sciene, Colloge of Computing, Khon Khen University </p>
                <button class="btn btn-success" id="playBtn">start</button>
                <button class="btn btn-success" id="stopBtn">stop</button>
                <a href="../index.html" class="btn btn-danger">home</a>
            </div>
          </div>
    </div>

    <div class="container my-2" id="main">
        <div class="row">
            <div class="col"><img src="./Image/0.png" id="img1"></div>
            <div class="col"><img src="./Image/0.png" id="img2"></div>
            <div class="col"><img src="./Image/0.png" id="img3"></div>
            <div class="col"><img src="./Image/0.png" id="img4"></div>
            <div class="col"><img src="./Image/0.png" id="img5"></div>
            <div class="col"><img src="./Image/0.png" id="img6"></div>
        </div>
        <div class="row">
            <div class="col"><img src="./Image/0.png" id="img7"></div>
            <div class="col"><img src="./Image/0.png" id="img8"></div>
            <div class="col"><img src="./Image/0.png" id="img9"></div>
            <div class="col"><img src="./Image/0.png" id="img10"></div>
            <div class="col"><img src="./Image/0.png" id="img11"></div>
            <div class="col"><img src="./Image/0.png" id="img12"></div>
        </div>
        <div class="row">
            <div class="col"><img src="./Image/0.png" id="img13"></div>
            <div class="col"><img src="./Image/0.png" id="img14"></div>
            <div class="col"><img src="./Image/0.png" id="img15"></div>
            <div class="col"><img src="./Image/0.png" id="img16"></div>
            <div class="col"><img src="./Image/0.png" id="img17"></div>
            <div class="col"><img src="./Image/0.png" id="img18"></div>
        </div>
        <div class="row">
            <div class="col"><img src="./Image/0.png" id="img19"></div>
            <div class="col"><img src="./Image/0.png" id="img20"></div>
            <div class="col"><img src="./Image/0.png" id="img21"></div>
            <div class="col"><img src="./Image/0.png" id="img22"></div>
            <div class="col"><img src="./Image/0.png" id="img23"></div>
            <div class="col"><img src="./Image/0.png" id="img24"></div>
        </div>
        <div class="row">
            <div class="col"><img src="./Image/0.png" id="img25"></div>
            <div class="col"><img src="./Image/0.png" id="img26"></div>
            <div class="col"><img src="./Image/0.png" id="img27"></div>
            <div class="col"><img src="./Image/0.png" id="img28"></div>
            <div class="col"><img src="./Image/0.png" id="img29"></div>
            <div class="col"><img src="./Image/0.png" id="img30"></div>
        </div>
        <div class="row">
            <div class="col"><img src="./Image/0.png" id="img31"></div>
            <div class="col"><img src="./Image/0.png" id="img32"></div>
            <div class="col"><img src="./Image/0.png" id="img33"></div>
            <div class="col"><img src="./Image/0.png" id="img34"></div>
            <div class="col"><img src="./Image/0.png" id="img35"></div>
            <div class="col"><img src="./Image/0.png" id="img36"></div>
        </div>
    </div>
    <script>
        function shuffer() {
            var list = [];
            list[0] = 0;
            for (var i = 1; i <= 18; i++) {
                list.push(i);
                list.push(i);
            }
    
            for (var i = 1; i < 100; i++) {
                var a = 1 + Math.round(Math.random() * 35);
                var b = 1 + Math.round(Math.random() * 35);
                var t = list[a];
                list[a] = list[b];
                list[b] = t;
            }
    
            $("#menu img").attr("src", "Image/0.png").attr("state", 0);
            for (var i = 1; i <= 36; i++) {
                $("#img" + i).attr("srcx", "Image/" + list[i] + ".png").attr("state", 0);
            }
        }
    
        function startgame() {
            shuffer();
            open_count = 0;
            all_card = 36;
            $("#main").show();
        }
    
        function stopgame() {
            $("#main").hide();
        }
    
        $(function () {
            $("#main").hide();
            $("#playBtn").click(startgame);
            $("#stopBtn").click(stopgame);
            $("#main img").click(imgClick);
        });
    
        var open_count = 0;
        var open_card1 = 0;
        var open_card2 = 0;
        var all_card = 36;
    
        function imgClick() {
            // If the card is already flipped, matched, or two cards are already open, do nothing
            if ($(this).attr("state") != 0 || open_count >= 2) {
                return;
            }
        
            open_count++;
            var s = $(this).attr("srcx");
        
            if (open_count === 1) {
                open_card1 = s;
            } else if (open_count === 2) {
                open_card2 = s;
            }
        
            $(this).hide().attr("src",s).slideDown(500);
            $(this).attr("state", 1);
        
            if (open_count === 2) {
                setTimeout(() => {
                    if (open_card1 === open_card2) {
                        all_card -= 2;
                        $("[state=1]").fadeOut(1000, function () {
                            $(this).attr("state", 2);
                        });
                    } else {
                        $("[state=1]").attr("state", 0).attr("src", "Image/0.png");
                    }
                    open_count = 0;
                    open_card2 = "";
                    open_card1 = "";
        
                    // Check if all cards are matched
                    if (all_card === 0) {
                        alert("Congratulations! You've matched all the cards.");
                        stopgame();
                    }
                }, 1000);
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>
